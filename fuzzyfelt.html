<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
		<title>Jakes Fuzzy Felt</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	</head>
	<body>
<div>
<h1>Short Term Tasks</h1>
<canvas id="canvas_short" width=1300 height=2800" />
</div>
<h1>Medium Term Tasks</h1>
<div>
<canvas id="canvas_medium" width=3500 height=2800" />
</div>
<h1>Long Term Tasks</h1>
<div>
<canvas id="canvas_long" width=8300 height=2800" />
</div>

<script type="text/javascript">

Object.getPrototypeOf(document.createElement('canvas').getContext('2d')).fillRectR = function(x,y,w,h,r)
{
	if (typeof r === "undefined")
	{
		r = 5;
	}
	this.beginPath();
	this.moveTo(x + r, y);
	this.lineTo(x + w - r, y);
	this.quadraticCurveTo(x + w, y, x + w, y + r);
	this.lineTo(x + w, y + h - r);
	this.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
	this.lineTo(x + r, y + h);
	this.quadraticCurveTo(x, y + h, x, y + h - r);
	this.lineTo(x, y + r);
	this.quadraticCurveTo(x, y, x + r, y);
	this.closePath();
	this.fill();
}

Object.getPrototypeOf(document.createElement('canvas').getContext('2d')).strokeRectR = function(x,y,w,h,r)
{
	if (typeof r === "undefined")
	{
		r = 5;
	}
	this.beginPath();
	this.moveTo(x + r, y);
	this.lineTo(x + w - r, y);
	this.quadraticCurveTo(x + w, y, x + w, y + r);
	this.lineTo(x + w, y + h - r);
	this.quadraticCurveTo(x + w, y + h, x + w - r, y + h);
	this.lineTo(x + r, y + h);
	this.quadraticCurveTo(x, y + h, x, y + h - r);
	this.lineTo(x, y + r);
	this.quadraticCurveTo(x, y, x + r, y);
	this.closePath();
	this.stroke();
}
</script>
<script type="text/javascript">

const HIGH_PRIORITY = 0;
const MEDIUM_PRIORITY = 1;
const LOW_PRIORITY = 2;
const HIGH_RISK = 3;
const MEDIUM_RISK = 4;
const LOW_RISK = 5;
const TASK_UNDEFINED = 6;
const TASK_DONE = 7;
const HOLIDAY = 8;

var boxColours = [
	"#DD1111", // HIGH_PRIORITY = 0;
	"#FFCC00", // MEDIUM_PRIORITY = 1;
	"#22CC00", // LOW_PRIORITY = 2;
	"#DD1111", // HIGH_RISK = 3;
	"#FFCC00", // MEDIUM_RISK = 4;
	"#22CC00", // LOW_RISK = 5;
	"#3366FF", // TASK_UNDEFINED = 6;
	"#707070", // TASK_DONE = 7;
	"#DD11DD", // HOLIDAY = 8;
];

var monthNames = [
	"Janurary",
	"February",
	"March",
	"April",
	"May",
	"June",
	"July",
	"August",
	"September",
	"October",
	"November",
	"December",
	];

function TaskItem(owner, title, duration, taskStatus, id)
{
	this.m_owner = owner;
	this.m_title = title;
	this.m_duration = duration;
	this.m_taskStatus = taskStatus;
	if (typeof(id) === "undefined")
	{
		this.m_id = null;
	}
	else
	{
		this.m_id = id;
	}
	this.m_startDate = null;
	this.m_parentID = null;
}

function FuzzyFeltElement(text, x, y, w, h, boxColour)
{
	this.m_text = text
	this.m_x = x
	this.m_y = y
	this.m_w = w
	this.m_h = h
	this.m_boxColour = boxColour
}

function FuzzyViewData(cellWidth, cellHeight, nameX, weekX, weekY)
{
	this.m_cellWidth = cellWidth;
	this.m_cellHeight = cellHeight;
	this.m_nameX = nameX;
	this.m_weekX = weekX;
	this.m_weekY = weekY;
}

function makeSortedTasks(tasks, startDate)
{
	var sortedTasks = [];
	var dateBits = startDate.split("/");
	var weekDay = parseInt(dateBits[0]);
	var weekMonth = parseInt(dateBits[1]);
	var weekYear = parseInt(dateBits[2]);
	var planStartDate = new Date(weekYear, weekMonth-1, weekDay);

	var ownerCurrentEnds = new Object();
	for (var i = 0; i < tasks.length; i++)
	{
		var task = tasks[i];
		var owner = task.m_owner;
		var duration = task.m_duration;

		if (typeof(ownerCurrentEnds[owner]) == "undefined")
		{
			ownerCurrentEnds[owner] = planStartDate;
		}
		var startDate = ownerCurrentEnds[owner];
		task.m_startDate = startDate;
		sortedTasks.push(task);

		var startDateDay = startDate.getDate();
		var endDateDay = startDateDay + 7 * duration;
		var endDate = new Date(startDate.getFullYear(), startDate.getMonth(), endDateDay);
		ownerCurrentEnds[owner] = endDate;
	}
	return sortedTasks;
}

function getLines(ctx,phrase,maxPxLength)
{
	//break the text area text into lines based on "box" width
	var wa = phrase.split(" ");
	var phraseArray = [];
	var lastPhrase = "";
	var l = maxPxLength;
	var measure = 0;
	for (var i = 0;i < wa.length; i++)
	{
		var w= wa[i];
		measure = ctx.measureText(lastPhrase+w).width;
		if (measure < l)
		{
			lastPhrase += (" "+w);
		}
		else
		{
			phraseArray.push(lastPhrase);
			lastPhrase = w;
		}
		if (i === wa.length-1)
		{
			phraseArray.push(lastPhrase);
			break;
		}
	}
	return phraseArray;
}

function drawColumnLine(ctx, x, y, h)
{
	ctx.strokeStyle = 'rgba(0,0,0,1.0)';
	ctx.lineWidth = 4.0
	ctx.beginPath();
	ctx.moveTo(x, y);
	ctx.lineTo(x, y+h);
	ctx.closePath();
	ctx.stroke();
}

function drawRowLine(ctx, x, y, w)
{
	ctx.strokeStyle = 'rgba(0,0,0,1.0)';
	ctx.lineWidth = 4.0
	ctx.beginPath();
	ctx.moveTo(x, y);
	ctx.lineTo(x+w, y);
	ctx.closePath();
	ctx.stroke();
}

function drawGrid(ctx, cellWidth, cellHeight, numRows, numCols, nameX, weekX)
{
	var w = cellWidth*numCols + weekX;
	var h = cellHeight*numRows;

	// Draw the column lines
	var x0 = 0;
	var y0 = 0;
	drawColumnLine(ctx, x0, y0, h);
	x0 = nameX;
	drawColumnLine(ctx, x0, y0, h);
	x0 = weekX;
	for (var i = 0; i < numCols; i++)
	{
		drawColumnLine(ctx, x0, y0, h);
		x0 += cellWidth;
	}
	drawColumnLine(ctx, x0, y0, h);

	// Draw the row lines
	x0 = 0;
	y0 = 0;
	drawRowLine(ctx, x0, cellHeight/2, w);
	for (var i = 0; i < numRows; i++)
	{
		drawRowLine(ctx, x0, y0, w);
		y0 += cellHeight;
	}
	drawRowLine(ctx, x0, y0, w);
}

function drawLegendShort(ctx, legendX, legendY, legendWidth, legendHeight)
{
	var x = legendX;
	var w = legendWidth - 10;
	var h = legendHeight -10;

	x += (10/2);
	y = legendY;
	y += (10/2);
	drawFuzzyFeltElement(ctx, "High Risk +100%", x, y, w, h, boxColours[HIGH_RISK]);
	y += legendHeight;
	drawFuzzyFeltElement(ctx, "Medium Risk +50%", x, y, w, h, boxColours[MEDIUM_RISK]);
	y += legendHeight;
	drawFuzzyFeltElement(ctx, "Low Risk +0%", x, y, w, h, boxColours[LOW_RISK]);
	y += legendHeight;
	drawFuzzyFeltElement(ctx, "Task Details Unknown", x, y, w, h, boxColours[TASK_UNDEFINED]);
	y += legendHeight;
	drawFuzzyFeltElement(ctx, "Task Completed", x, y, w, h, boxColours[TASK_DONE]);
	y += legendHeight;
}

function drawLegendFuture(ctx, legendX, legendY, legendWidth, legendHeight)
{
	var x = legendX;
	var w = legendWidth - 10;
	var h = legendHeight -10;

	x += (10/2);
	y = legendY;
	y += (10/2);
	drawFuzzyFeltElement(ctx, "High Priority", x, y, w, h, boxColours[HIGH_PRIORITY]);
	y += legendHeight;
	drawFuzzyFeltElement(ctx, "Medium Priority", x, y, w, h, boxColours[MEDIUM_PRIORITY]);
	y += legendHeight;
	drawFuzzyFeltElement(ctx, "Low Priority", x, y, w, h, boxColours[LOW_PRIORITY]);
	y += legendHeight;
	drawFuzzyFeltElement(ctx, "Task Details Unknown", x, y, w, h, boxColours[TASK_UNDEFINED]);
	y += legendHeight;
}

function drawCellText(ctx, text, x0, y0, w, h, bgColour)
{
	ctx.shadowOffsetX = 0;
	ctx.shadowOffsetY = 0;
	ctx.shadowBlur = 0;
	ctx.fillStyle = bgColour;
	ctx.lineWidth = 0.0;
	ctx.fillRect(x0, y0, w, h);

	var xc = x0 + w/2;
	var yc = y0 + h/2;
	ctx.shadowOffsetX = 0;
	ctx.shadowOffsetY = 0;
	ctx.shadowBlur = 0;
	ctx.textAlign = 'center';
	ctx.textBaseline = 'middle';
	ctx.strokeStyle = 'rgba(0,0,0,1.0)';
	ctx.lineWidth  = 4.0;
	ctx.fillStyle = '#000';
	ctx.fillText(text, xc, yc);
}

function drawTitle(ctx, title, n, titleX, titleY, titleWidth, titleHeight, bgColour)
{
	var x0 = titleX + n * titleWidth;
	var y0 = titleY;
	drawCellText(ctx, title, x0, y0, titleWidth, titleHeight, bgColour);
}

function drawName(ctx, name, n, nameX, nameY, nameWidth, nameHeight, bgColour)
{
	var x0 = nameX;
	var y0 = nameY + n * nameHeight;
	drawCellText(ctx, name, x0, y0, nameWidth, nameHeight, bgColour);
}

function drawFuzzyFeltElement(ctx, text, x, y, w, h, boxColour)
{
	var fuzzyFeltElement = new FuzzyFeltElement(text, x, y, w, h, boxColour);
	internalDrawFuzzyFeltElement(ctx, fuzzyFeltElement)
}

function internalDrawFuzzyFeltElement(ctx, fuzzyFeltElement)
{
	const text = fuzzyFeltElement.m_text;
	const x = fuzzyFeltElement.m_x;
	const y = fuzzyFeltElement.m_y;
	const w = fuzzyFeltElement.m_w;
	const h = fuzzyFeltElement.m_h;
	const boxColour = fuzzyFeltElement.m_boxColour;

	ctx.shadowOffsetX = 0;
	ctx.shadowOffsetY = 0;
	ctx.shadowBlur    = 0;
	ctx.shadowColor   = 'rgba(0, 0, 0, 0.0)';
	ctx.fillStyle = boxColour;
	ctx.strokeStyle = 'rgba(0,0,0,1.0)';
	ctx.fillRectR(x, y, w, h, 20);
	ctx.lineWidth = 4.0;
	ctx.strokeRectR(x, y, w, h, 20);

	ctx.shadowOffsetX = 0;
	ctx.shadowOffsetY = 0;
	ctx.shadowBlur    = 0;
	ctx.shadowColor   = 'rgba(150, 150, 150, 0.5)';
	ctx.fillStyle    = '#000';
	ctx.textAlign = 'center';
	ctx.textBaseline = 'middle';
	pxHeight = 18;
	linesArray = getLines(ctx, text, w-15);
	numLines = linesArray.length;
	textx = x+w/2;
	texty = y+h/2-(((numLines-1)/2)*pxHeight);
	for (var i=0; i < numLines; i++)
	{
		line = linesArray[i];
		ctx.fillText(line, textx, texty);
		texty += pxHeight;
	}
}

function drawFuzzyFelt(canvas, fuzzyData, names, tasks, shortTermPlan, weekDateStart, numWeeks)
{
	var ctx = canvas.getContext('2d');
	ctx.font = 'bold 18px sans-serif';

	const numPeople=names.length;

	const cellWidth=fuzzyData.m_cellWidth;
	const cellHeight=fuzzyData.m_cellHeight;
	const nameX=fuzzyData.m_nameX;
	const weekX=fuzzyData.m_weekX;
	const weekY=fuzzyData.m_weekY;

	const numCols=numWeeks;
	const numRows=numPeople+2;

	const elementHeight=cellHeight-10;

	const weekWidth=cellWidth;

	const nameY=weekY;
	const nameWidth=weekX-nameX;
	const nameHeight=cellHeight;

	const titleX=weekX;
	const titleY=0;
	const titleWidth=cellWidth;
	const titleHeight=cellHeight/2;

	const weekDateY = (weekY-titleY)/2

	const legendX = 0;
	const legendY = weekY;
	const legendWidth = nameX-legendX;
	const legendHeight = cellHeight;

	var pastelColours = [
		"#FF4848",
		"#06DCFB",
		"#79FC4E",
		"#DFE32D",
		"#DDCEFF",
		"#B4D1B6",
	];

	// Draw week titles
	var pastelColourIndex = 0;
	var lastColourText = '';
	var dateBits = weekDateStart.split("/");
	var weekDay = parseInt(dateBits[0]);
	var weekMonth = parseInt(dateBits[1]);
	var weekYear = parseInt(dateBits[2]);
	const planStartDate = new Date(weekYear, weekMonth-1, weekDay);

	for (var w = 0; w < numWeeks; w++)
	{
		weekDateString = weekDay.toString()+"/"+weekMonth.toString()+"/"+weekYear.toString();
		var fridayDate = new Date(weekYear, weekMonth-1, weekDay+5);
		var fridayMonth = fridayDate.getMonth();
		var title = monthNames[fridayMonth];
		if (title != lastColourText)
		{
			pastelColourIndex++;
			if (pastelColourIndex >= pastelColours.length)
			{
				pastelColourIndex = 0;
			}
			lastColourText = title;
		}
		var titleBGcolour = pastelColours[pastelColourIndex];
		drawTitle(ctx, title, w, titleX, titleY, titleWidth, titleHeight, titleBGcolour);

		// Draw week dates if wanted
		drawTitle(ctx, weekDateString, w, titleX, weekDateY, titleWidth, titleHeight, titleBGcolour);

		weekDay += 7
		var weekStart = new Date(weekYear, weekMonth-1, weekDay);
		weekDay = weekStart.getDate();
		weekMonth = weekStart.getMonth()+1;
		weekYear = weekStart.getFullYear();
	}

	// Draw name titles
	pastelColourIndex = 0;
	lastColourText = '';

	for (var n = 0; n < numPeople; n++)
	{
		var name = names[n];
		if (name != lastColourText)
		{
			pastelColourIndex++;
			if (pastelColourIndex >= pastelColours.length)
			{
				pastelColourIndex = 0;
			}
			lastColourText = name;
		}
		var nameBGcolour = pastelColours[pastelColourIndex];
		drawName(ctx, name, n, nameX, nameY, nameWidth, nameHeight, nameBGcolour);
	}

	drawGrid(ctx, cellWidth, cellHeight, numRows, numCols, nameX, weekX);
	if (shortTermPlan)
	{
		drawLegendShort(ctx, legendX, legendY, legendWidth, legendHeight);
	}
	else
	{
		drawLegendFuture(ctx, legendX, legendY, legendWidth, legendHeight);
	}

	fuzzyFeltElements = []

	// Draw the fuzzy felt elements
	for (var n = 0; n < numPeople; n++)
	{
		var x0 = weekX;
		var y = weekY + n*cellHeight + (10/2);
		name = names[n];
		var numWeeksForPerson = 0;
		for (var i = 0; i < tasks.length; i++)
		{
			var task = tasks[i];
			if (task.m_owner == name)
			{
				var startDate = task.m_startDate;
				if (startDate >= planStartDate)
				{
					var text = task.m_title;
					var duration = task.m_duration;
					var taskStatus = task.m_taskStatus;

					var w = duration * weekWidth - 10;
					var h = elementHeight;
					var x = x0;
					x += (10/2);
					var boxColour = boxColours[taskStatus];

					fuzzyFeltElement = new FuzzyFeltElement(text, x, y, w, h, boxColour);
					fuzzyFeltElements.push(fuzzyFeltElement);

					x0 += duration * cellWidth;
					numWeeksForPerson += duration;
				}
			}
			if (numWeeksForPerson >= numWeeks)
			{
				break;
			}
		}
	}

	for (var i = 0; i < fuzzyFeltElements.length; i++)
	{
		var fuzzyFeltElement = fuzzyFeltElements[i];
		internalDrawFuzzyFeltElement(ctx, fuzzyFeltElement);
	}
}
</script>

<script type="text/javascript">

var names = [
	'Lee',
	'Paul H',
	'Michael N',
	'Andy C',
	'Paul M',
	'Jake',
	'Baldur',
	'Andy K',
	'James C',
	'Alex W',
	'Chris B',
	'Stan',
	'Rob J',
	'JohnMichael',
	'Andy M',
	'Andy R',
	'Stephen B',
	'Sandy',
	'Oli',
	'Charlie',
	'Miles',
];

var tasks = [
	new TaskItem("Lee", "C3: Integrate DirtySocks", 1, TASK_DONE),
	new TaskItem("Lee", "C3: Integrate Blaze PC LAN Mode Working", 1, MEDIUM_RISK),
	new TaskItem("Lee", "C3: Integrate Blaze PC Online Mode Working", 1, HIGH_RISK),
	new TaskItem("Lee", "C3: Integrate Blaze PC Online Mode Working", 1, HIGH_RISK),

	new TaskItem("Paul H", "Holiday", 1, TASK_DONE),
	new TaskItem("Paul H", "C3, HF2: Squeeze network packet b/w", 1, MEDIUM_RISK),
	new TaskItem("Paul H", "C3, HF2: Squeeze network packet b/w", 1, MEDIUM_RISK),
	new TaskItem("Paul H", "C3, HF2: remove C2 hacks from CryLobby", 1, LOW_RISK),

	new TaskItem("Michael N", "C3, HF2: detailed bandwidth output in statoscope", 1, TASK_DONE),
	new TaskItem("Michael N", "C3, HF2: basic bandwidth output in statoscope", 1, LOW_RISK),
	new TaskItem("Michael N", "WF: Pri 1 network thread update mode and dedicated server performance", 1, MEDIUM_RISK),
	new TaskItem("Michael N", "WF: Pri 3 remove 'wrld', ARITH ENCODER OFF", 1, LOW_RISK),

	new TaskItem("Andy C", "C3, HF2: new NetTimer editor bugs", 1, TASK_DONE),
	new TaskItem("Andy C", "C3, HF2: new NetTimer MP end of session bugs", 1, LOW_RISK),
	new TaskItem("Andy C", "C3, HF2: message Queue and packet rate: bug fixes", 1, LOW_RISK),
	new TaskItem("Andy C", "C3, HF2: message Queue and packet rate: testing & commit", 1, LOW_RISK),

	new TaskItem("Paul M", "C3: Remove GS lobby data ID's from public interface", 1, TASK_DONE),
	new TaskItem("Paul M", "C3: Remove GS lobby data ID's from public interface: testing, game side, committing", 1, LOW_RISK),
	new TaskItem("Paul M", "C3: CryLobby GameSpy rewrite Move presence tasks into new component: login, logout", 1, LOW_RISK),
	new TaskItem("Paul M", "C3: CryLobby GameSpy rewrite Move presence tasks into new component: create new account", 1, LOW_RISK),

	new TaskItem("Jake", "Write Up Meetings", 1, TASK_DONE),
	new TaskItem("Jake", "Write Up Meetings", 1, LOW_RISK),
	new TaskItem("Jake", "Write Up Meetings", 1, LOW_RISK),
	new TaskItem("Jake", "Write Up Meetings", 1, LOW_RISK),

	new TaskItem("Baldur", "C3: Water ripples when in water volumes on the swamp level", 1,TASK_DONE),
	new TaskItem("Baldur", "C3: optimise 3D menu support in the render loop: investigate potential options", 1, LOW_RISK),
	new TaskItem("Baldur", "C3: optimise 3D menu support in the render loop: implementation, profiling & timing", 1, LOW_RISK),
	new TaskItem("Baldur", "Vegetation: dissolve & instancing fixes", 1, LOW_RISK),

	new TaskItem("Andy K", "Holiday", 1, TASK_DONE),
	new TaskItem("Andy K", "Cafe: fix SDK1.8 shader problems", 1, TASK_DONE),
	new TaskItem("Andy K", "Cafe: shader compiler EXE instead of lib for hlsl->glsl", 1, LOW_RISK),
	new TaskItem("Andy K", "HF2: Terrain rendering improvements", 1, TASK_UNDEFINED),

	new TaskItem("James C", "C3: optimise 3D menu support in the render loop: investigate potential options", 1, TASK_DONE),
	new TaskItem("James C", "C3: armour effect - TBD", 3, TASK_UNDEFINED),

	new TaskItem("Alex W", "C3, HF2: C1C Integrates", 1, LOW_RISK),
	new TaskItem("Alex W", "Cafe: DXPS file/class renaming & tidyup", 1, TASK_DONE),
	new TaskItem("Alex W", "HF2: AO static & dyanmic, research into options including memory impact on consoles", 1, TASK_UNDEFINED),
	new TaskItem("Alex W", "HF2: AO research & prototype development - TBD", 1, TASK_UNDEFINED),

	new TaskItem("Chris B", "C3: New Glass: High level glass object management: design", 1, TASK_DONE),
	new TaskItem("Chris B", "C3: New Glass: High level glass object management: optimisation", 1, LOW_RISK),
	new TaskItem("Chris B", "C3: New Glass: New Glass Art tweaks/support: in editor", 1, LOW_RISK),
	new TaskItem("Chris B", "C3: New Glass: New Glass: QA pass and bug fixing", 1, LOW_RISK),

	new TaskItem("Stan", "C3: improve player network interpolation", 1, MEDIUM_RISK),
	new TaskItem("Stan", "Holiday", 1, HOLIDAY),
	new TaskItem("Stan", "HF2: vehicle handling tweaks", 1, LOW_RISK),
	new TaskItem("Stan", "C3: improve & extend collision filtering system: design" , 1, MEDIUM_RISK),

	new TaskItem("Rob J", "C3: GameStream: refactor code and commit it", 1, LOW_RISK),
	new TaskItem("Rob J", "GameStream: CI build support on local server", 1, TASK_DONE),
	new TaskItem("Rob J", "GameStream: CI build deployment to network server", 1, LOW_RISK),
	new TaskItem("Rob J", "GameStream: local PAK updating", 1, HIGH_RISK),

	new TaskItem("JohnMichael", "HF2: lowercase files/dirs in Editor", 1, TASK_DONE),
	new TaskItem("JohnMichael", "HF2: lowercase files Tools Exporter & RC", 1, MEDIUM_RISK),
	new TaskItem("JohnMichael", "HF2: Asset Browser tweaks for outsourcing", 1, HIGH_RISK),
	new TaskItem("JohnMichael", "HF2: Asset Browser tweaks for outsourcing", 1, HIGH_RISK),
	
	new TaskItem("Andy M", "C3:  loading profiling with / without uber MP list", 1, TASK_DONE),
	new TaskItem("Andy M", "C3: pre-cache paks during lobby", 1, LOW_RISK),
	new TaskItem("Andy M", "C3: loading times: GFX files in custom in-memory pak: custom local build process", 1, LOW_RISK),
	new TaskItem("Andy M", "C3: loading times: GFX files in custom in-memory pak: finalized build process", 1, LOW_RISK),
	
	new TaskItem("Andy R", "Maya: preserve unknown materials", 1, MEDIUM_RISK),
	new TaskItem("Andy R", "Holiday", 2, HOLIDAY),
	new TaskItem("Andy R", "Maya: fix broken ragdoll limits", 1, MEDIUM_RISK),
	
	new TaskItem("Stephen B", "C3: Amble version of C3 MP stress tester: 360", 1, TASK_DONE),
	new TaskItem("Stephen B", "C3: Amble version of C3 MP stress tester: PS3", 1, LOW_RISK),
	new TaskItem("Stephen B", "C3: Amble support for PC C3 MP stress tester", 1, LOW_RISK), 
	new TaskItem("Stephen B", "C3, HF2: Autotesting use idle devkits (artist, designer, coder)", 1, TASK_UNDEFINED),
	
	new TaskItem("Sandy", "PC Version of Amble: tidyup & reporting system", 1, TASK_DONE),
	new TaskItem("Sandy", "HF2: Amble version of HF2 stress tester: 360", 1, LOW_RISK),
	new TaskItem("Sandy", "HF2: Amble version of HF2 stress tester: PS3", 1, LOW_RISK),
	new TaskItem("Sandy", "HF2: Amble version of HF2 stress tester: PC", 1, LOW_RISK),

	new TaskItem("Oli", "C3, HF2: autotesting memory backend processing", 1, TASK_DONE),
	new TaskItem("Oli", "C3, HF2: autotesting memory web display", 1, MEDIUM_RISK),
	new TaskItem("Oli", "C3, HF2:memreplay track/warn/error cross module memory abuse", 1, MEDIUM_RISK),
	new TaskItem("Oli", "C3, HF2:memreplay track/warn/error cross module memory abuse: integration into memory autotesting", 1, LOW_RISK),
	
	new TaskItem("Charlie", "C3, HF2: C1C Integrates", 1, TASK_DONE),
	new TaskItem("Charlie", "Holiday", 1, HOLIDAY),
	new TaskItem("Charlie", "Blackbox2: track memory access errors run time code", 1, LOW_RISK),
	new TaskItem("Charlie", "Blackbox2: track memory access errors in processing tool", 1, LOW_RISK),
		
	new TaskItem("Miles", "Statoscope: thread scheduling runtime tracking", 1, TASK_DONE),
	new TaskItem("Miles", "Statoscope: thread scheduling tool processing & display", 1, MEDIUM_RISK),
	new TaskItem("Miles", "Holiday", 2, HOLIDAY),

	new TaskItem("Lee", "WF: analyse client reconnect time", 1, HIGH_PRIORITY),
	new TaskItem("Lee", "WF: profile and plan for next peak (5s)", 1, HIGH_PRIORITY),
	new TaskItem("Lee", "C3: integrate host migration optimisations into dev/c3 branch (ready for testing)", 1, HIGH_PRIORITY),
	new TaskItem("Lee", "Holiday", 1, HOLIDAY),
	new TaskItem("Lee", "Christmas", 1, HOLIDAY),
	new TaskItem("Lee", "WF: Implement Host Migration optimisations to get below 2 second migration time", 4, HIGH_PRIORITY),
	new TaskItem("Lee", "C3: Implement Host Migration optimisations - TBD", 4, TASK_UNDEFINED),

	new TaskItem("Paul H", "C3, HF2: remove C2 hacks from CryLobby", 1, LOW_PRIORITY),
	new TaskItem("Paul H", "WF: Pri3 remove support for aspect profiles - game & engine side", 2, HIGH_PRIORITY),
	new TaskItem("Paul H", "Holiday", 1, HOLIDAY),
	new TaskItem("Paul H", "Christmas", 1, HOLIDAY),
	new TaskItem("Paul H", "HF2: profile mem & CPU 32 player network game", 4, LOW_PRIORITY),
	new TaskItem("Paul H", "Public API for TCPSteamSocket in CrySystem", 3, LOW_PRIORITY),

	new TaskItem("Michael N", "WF: Pri 1 network thread update modes and dedicated server performance", 2, HIGH_PRIORITY),
	new TaskItem("Michael N", "Holiday", 2, HOLIDAY),
	new TaskItem("Michael N", "Christmas", 1, HOLIDAY),
	new TaskItem("Michael N", "WF: Pri 3 Use adaptive Huffman encoder instead of arith encoder", 2, HIGH_PRIORITY),
	new TaskItem("Michael N", "C3: profile network mem & CPU for 12 player network game", 2, MEDIUM_PRIORITY),
	new TaskItem("Michael N", "Network Debug Info: RMI stats, graph, memory stats", 2, LOW_PRIORITY),
	new TaskItem("Michael N", "C2, HF3: Implement clean version of RMI boost hack", 4, LOW_PRIORITY),

	new TaskItem("Andy C", "WF: Pri 2 pre-allocate EIDs", 2, HIGH_PRIORITY),
	new TaskItem("Andy C", "WF: Pri 3 memory per player, per net-bound object", 1, HIGH_PRIORITY),
	new TaskItem("Andy C", "Holiday", 1, HOLIDAY),
	new TaskItem("Andy C", "Christmas", 1, HOLIDAY),
	new TaskItem("Andy C", "WF: Pri 3 memory per player, per net-bound object", 1, HIGH_PRIORITY),
	new TaskItem("Andy C", "C3, HF2: profile lag between game & network send", 2, MEDIUM_PRIORITY),
	new TaskItem("Andy C", "C3, HF2: profile lag between network receive and game", 2, MEDIUM_PRIORITY),
	new TaskItem("Andy C", "C3, HF2: load time ticker bug on PC & 360 for vehicles", 1, LOW_PRIORITY),
	new TaskItem("Andy C", "Fragmentor system update robust", 4, TASK_UNDEFINED),

	new TaskItem("Paul M", "C3: CryLobby GS rewrite - move account management tasks into new component", 2, HIGH_PRIORITY),
	new TaskItem("Paul M", "C3: CryLobby GS rewrite - manage GameSpy in lobby service not in the first component", 2, HIGH_PRIORITY),
	new TaskItem("Paul M", "Christmas", 1, HOLIDAY),
	new TaskItem("Paul M", "C3: CryLobby GS rewrite - manage GameSpy in lobby service not in the first component", 2, HIGH_PRIORITY),
	new TaskItem("Paul M", "C3: CryLobby GS rewrite - remove hard coded names in sake tables & fields", 2, HIGH_PRIORITY),
	new TaskItem("Paul M", "C3: CryLobby GS rewrite - move strongly typed pointers back to lobby service in lobby sedrvice components", 2, HIGH_PRIORITY),

	new TaskItem("Jake", "GO INSANE", 4, TASK_UNDEFINED),
	new TaskItem("Jake", "Christmas", 1, HOLIDAY),
	new TaskItem("Jake", "GO INSANE", 12, TASK_UNDEFINED),

	new TaskItem("Baldur", "C3: commit C1C vegetation changes into dev/c3", 1, HIGH_PRIORITY),
	new TaskItem("Baldur", "C3: vegetation interaction improvements - TBD", 1, TASK_UNDEFINED),
	new TaskItem("Baldur", "Holiday", 2, HOLIDAY),
	new TaskItem("Baldur", "Christmas", 1, HOLIDAY),
	new TaskItem("Baldur", "C3: GPU profile + optimisations on PS3", 4, MEDIUM_PRIORITY),
	new TaskItem("Baldur", "C3: vegetation interaction improvements - TBD", 4, TASK_UNDEFINED),
	new TaskItem("Baldur", "HF2: jittering scopes code fix from C1C into HF2", 2, LOW_PRIORITY),
	new TaskItem("Baldur", "C3, HF2: HW instancing optimisations part 2", 4, LOW_PRIORITY),

	new TaskItem("Andy K", "HF2: Terrain rendering improvements - TBD", 1, TASK_UNDEFINED),
	new TaskItem("Andy K", "Holiday", 3, HOLIDAY),
	new TaskItem("Andy K", "Christmas", 1, HOLIDAY),
	new TaskItem("Andy K", "HF2: Terrain rendering improvements - TBD", 12, TASK_UNDEFINED),
	new TaskItem("Andy K", "C3: Tiago shadow tasks - TBD", 4, TASK_UNDEFINED),
	new TaskItem("Andy K", "C3: Tiago shadow tasks - TBD", 4, TASK_UNDEFINED),

	new TaskItem("James C", "C3: armour effect - TBD", 1, TASK_UNDEFINED),
	new TaskItem("James C", "Holiday", 3, HOLIDAY),
	new TaskItem("James C", "Christmas", 1, HOLIDAY),
	new TaskItem("James C", "C3: GPU profile + optimisations on 360", 4, MEDIUM_PRIORITY),
	new TaskItem("James C", "C3: armour effect - TBD", 10, TASK_UNDEFINED),
	new TaskItem("James C", "C3: cloaking improvements - TBD", 4, TASK_UNDEFINED),
	new TaskItem("James C", "C3: cheap silhouette effect for squad outlines", 4, TASK_UNDEFINED),
	new TaskItem("James C", "C3: E-shield updates/tweaks/feedback", 2, LOW_PRIORITY),

	new TaskItem("Alex W", "HF2: AO research & prototype development - TBD", 3, TASK_UNDEFINED),
	new TaskItem("Alex W", "Holiday", 1, HOLIDAY),
	new TaskItem("Alex W", "Christmas", 1, HOLIDAY),
	new TaskItem("Alex W", "HF2: AO research & prototype development - TBD", 16, TASK_UNDEFINED),

	new TaskItem("Chris B", "C3: Split new glass engine changes into unique changelists and start code reviews", 1, LOW_PRIORITY),
	new TaskItem("Chris B", "C3: Net test with new glass system, feedback from code reviews ", 1, LOW_PRIORITY),
	new TaskItem("Chris B", "C3: Fix bugs from QA testing and code review feedback", 1, LOW_PRIORITY),
	new TaskItem("Chris B", "C3: Commit code with new glass system disabled", 1, LOW_PRIORITY),
	new TaskItem("Chris B", "Christmas", 1, HOLIDAY),
	new TaskItem("Chris B", "C3: glow 3D HuF/Menu text special effect", 2, LOW_PRIORITY),
	new TaskItem("Chris B", "C3: New York feed special rendering/effect system: 3D models in menu++", 4, TASK_UNDEFINED),

	new TaskItem("Stan", "C3: improve & extend collision filtering system: game code" , 1, HIGH_PRIORITY),
	new TaskItem("Stan", "C3: moving platform implementation, game side, non-networked object, driven by the game code", 2, LOW_PRIORITY),
	new TaskItem("Stan", "Holiday", 1, HOLIDAY),
	new TaskItem("Stan", "Christmas", 1, HOLIDAY),
	new TaskItem("Stan", "C3: moving platform implementation, game side, non-networked object, driven by the game code", 2, LOW_PRIORITY),
	new TaskItem("Stan", "HF2: vehicles don't drive through destructible fences", 4, LOW_PRIORITY),
	new TaskItem("Stan", "HF2: profile vehicle code performance with large number of vehicles e.g. 20+ vehicles in stress test environment", 2, LOW_PRIORITY),
	new TaskItem("Stan", "C3: grenade prediction code optimisation", 8, LOW_PRIORITY),
	
	new TaskItem("Rob J", "GameStream: local PAK updating", 1, HIGH_PRIORITY),
	new TaskItem("Rob J", "Holiday", 3, HOLIDAY),
	new TaskItem("Rob J", "Christmas", 1, HOLIDAY),
	new TaskItem("Rob J", "C3: localisation tool", 2, HIGH_PRIORITY),
	new TaskItem("Rob J", "GameStream: 360 version", 2, HIGH_PRIORITY),
	new TaskItem("Rob J", "GameStream: PS3 version", 2, HIGH_PRIORITY),
	new TaskItem("Rob J", "GameStream: use with autotesting", 2, MEDIUM_PRIORITY),
	new TaskItem("Rob J", "GameStream: build from shelf", 2, LOW_PRIORITY),
	new TaskItem("Rob J", "GameStream: make nightly from incremental builds", 4, TASK_UNDEFINED),
	new TaskItem("Rob J", "GameStream: IT security make nightly from incremental builds", 4, TASK_UNDEFINED),

	new TaskItem("JohnMichael", "HF2: SpawnEntity flowgraph node from Ryse", 1, HIGH_PRIORITY),
	new TaskItem("JohnMichael", "HF2: SpawnEntity flowgraph node support for autoresourcelist.txt", 1, HIGH_PRIORITY),
	new TaskItem("JohnMichael", "BuildSuite: Fingerprinting", 1.5, MEDIUM_PRIORITY),
	new TaskItem("JohnMichael", "Holiday", 0.5, HOLIDAY),
	new TaskItem("JohnMichael", "Christmas", 1, HOLIDAY),
	new TaskItem("JohnMichael", "BuildSuite: command line support for use with autotesting", 2, LOW_PRIORITY),
	new TaskItem("JohnMichael", "BuildSuite: optimised build distribution system", 2, TASK_UNDEFINED),
	new TaskItem("JohnMichael", "C3: implement youtube video uploads on PC, PS3 - TBD", 2, TASK_UNDEFINED),
	new TaskItem("JohnMichael", "C3: implement youtube video uploads on 360 - TBD", 2, TASK_UNDEFINED),

	new TaskItem("Andy M", "Holiday", 2, HOLIDAY),
	new TaskItem("Andy M", "C3: loading time tweeks - thread balancing", 1, MEDIUM_PRIORITY),
	new TaskItem("Andy M", "Holiday", 1, HOLIDAY),
	new TaskItem("Andy M", "Christmas", 1, HOLIDAY),
	new TaskItem("Andy M", "C3: non-streaming textures precache tweeks", 2, MEDIUM_PRIORITY),
	new TaskItem("Andy M", "C3: preload queue which can be scheduled during game-startup, smaller precache list (just current loadout)", 2, MEDIUM_PRIORITY),
	new TaskItem("Andy M", "C3, HF2: profile and identify lag from input layer to game receiving state on 360. Reduce it somehow????", 4, HIGH_PRIORITY),
	new TaskItem("Andy M", "C3, HF2: profile and identify lag from input layer to game receiving state on PS3. Reduce it somehow????", 4, HIGH_PRIORITY),

	new TaskItem("Andy R", "Maya: investigate moving to Maya modules", 1, LOW_PRIORITY),
	new TaskItem("Andy R", "Maya: fix CGA/ANM animations", 1, LOW_PRIORITY),
	new TaskItem("Andy R", "Maya: fix LODs and multiple parts", 1, MEDIUM_PRIORITY),
	new TaskItem("Andy R", "Holiday", 1, HOLIDAY),
	new TaskItem("Andy R", "Christmas", 1, HOLIDAY),
	new TaskItem("Andy R", "Maya: fix joint orientations and LookIK", 1, MEDIUM_PRIORITY),
	new TaskItem("Andy R", "Maya: Export assets with >1 material group", 1, MEDIUM_PRIORITY),
	new TaskItem("Andy R", "Maya: Add 'help' to validate system", 1, LOW_PRIORITY),
	new TaskItem("Andy R", "Maya: Add documentation about system", 1, LOW_PRIORITY),
	new TaskItem("Andy R", "Maya: installer + for Cinebox", 1, LOW_PRIORITY),
	new TaskItem("Andy R", "Maya: ?????????????????", 3, MEDIUM_PRIORITY),

	new TaskItem("Stephen B", "C3, HF2: Autotesting use idle devkits (artist, designer, coder)", 3, TASK_UNDEFINED),
	new TaskItem("Stephen B", "Holiday", 1, HOLIDAY),
	new TaskItem("Stephen B", "Christmas", 1, HOLIDAY),
	new TaskItem("Stephen B", "C3, HF2: Visual Regression support in autotesting", 2, HIGH_PRIORITY),
	new TaskItem("Stephen B", "C3, HF2: autotesting error/warning metrics", 2, HIGH_PRIORITY),
	new TaskItem("Stephen B", "C3, HF2: trybuild for assets", 4, TASK_UNDEFINED),
	new TaskItem("Stephen B", "C3, HF2: autotesting improvements and extensionsions -TBD", 4, TASK_UNDEFINED),

	new TaskItem("Sandy", "HF2: Amble version of HF2 stress tester: SP tests", 1, LOW_PRIORITY),
	new TaskItem("Sandy", "Holiday", 3, HOLIDAY),
	new TaskItem("Sandy", "Christmas", 1, HOLIDAY),
	new TaskItem("Sandy", "C3: matchmaking telemetry visualisation tool", 4, TASK_UNDEFINED),
	new TaskItem("Sandy", "C3, HF2: put spindle tool inside BuildSuite", 4, TASK_UNDEFINED),

	new TaskItem("Oli", "Memreplay: improve UI look and feel", 2, MEDIUM_PRIORITY),
	new TaskItem("Oli", "Holiday", 2, HOLIDAY),
	new TaskItem("Oli", "Christmas", 1, HOLIDAY),
	new TaskItem("Oli", "C3, HF2: streaming system improvements, bug fixing - TBD", 12, TASK_UNDEFINED),

	new TaskItem("Charlie", "Blackbox2: valgrind research", 2, TASK_UNDEFINED),
	new TaskItem("Charlie", "Holiday", 2, HOLIDAY),
	new TaskItem("Charlie", "Christmas", 1, HOLIDAY),
	new TaskItem("Charlie", "C3: CPU profile + optimisations on PS3", 4, MEDIUM_PRIORITY),
	new TaskItem("Charlie", "Blackbox2: valgrind implementation", 12, TASK_UNDEFINED),

	new TaskItem("Miles", "Holiday", 1, HOLIDAY),
	new TaskItem("Miles", "Statoscope: event based profiling", 1, HIGH_PRIORITY),
	new TaskItem("Miles", "C3: optimisation for MaterialEffects system", 1, LOW_PRIORITY),
	new TaskItem("Miles", "C3: fix texture memory in wrong module bug", 0.5, LOW_PRIORITY),
	new TaskItem("Miles", "Holiday", 0.5, HOLIDAY),
	new TaskItem("Miles", "Christmas", 1, HOLIDAY),
	new TaskItem("Miles", "C3: CPU profile + optimisations on 360", 4, MEDIUM_PRIORITY),
	new TaskItem("Miles", "C3, HF2: autotesting performance metrics", 2, HIGH_PRIORITY),
];

const planStartDate = "31/10/2011"
var sortedTasks = makeSortedTasks(tasks, planStartDate)

var shortCanvas = document.getElementById("canvas_short");
var mediumCanvas = document.getElementById("canvas_medium");
var longCanvas = document.getElementById("canvas_long");

const cellWidth = 250;
const cellHeight = 120;
const nameX = 120;
const weekX = nameX + 120;
const weekY = cellHeight;
const shortDateStart = planStartDate;
var fuzzyViewData = new FuzzyViewData(cellWidth, cellHeight, nameX, weekX, weekY);
drawFuzzyFelt(shortCanvas, fuzzyViewData, names, sortedTasks, true, shortDateStart, 4);

fuzzyViewData.m_cellWidth = 250;
const mediumDateStart = "28/11/2011";
drawFuzzyFelt(mediumCanvas, fuzzyViewData, names, sortedTasks, false, mediumDateStart, 13);

fuzzyViewData.m_cellWidth = 250;
const longDateStart = "27/02/2012";
drawFuzzyFelt(longCanvas, fuzzyViewData, names, sortedTasks, false, longDateStart, 4*8);

</script>
</div>
</body>
</html>

